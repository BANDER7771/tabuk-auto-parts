# إعداد نظام الإشعارات - قطع تبوك

## متغيرات البيئة المطلوبة

### إشعارات الواتساب

#### الطريقة الأولى: CallMeBot (مجاني وسهل)
```
ADMIN_WHATSAPP_1=966555123456
CALLMEBOT_API_KEY=your_api_key_here
```

**خطوات الحصول على API Key من CallMeBot:**
1. أرسل رسالة "I allow callmebot to send me messages" إلى الرقم: +34 644 59 71 67
2. ستحصل على API Key
3. أضف الرقم والـ API Key في متغيرات البيئة

#### الطريقة الثانية: Twilio (مدفوع ولكن موثوق)
```
ADMIN_WHATSAPP_1=966555123456
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
```

### إشعارات البريد الإلكتروني (بديل)
```
ADMIN_EMAIL=admin@example.com
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password
```

## إعداد المتغيرات في Railway

1. اذهب إلى لوحة تحكم Railway
2. اختر مشروعك
3. اذهب إلى تبويب "Variables"
4. أضف المتغيرات المطلوبة

## إعداد المتغيرات في Render

1. اذهب إلى لوحة تحكم Render
2. اختر خدمتك
3. اذهب إلى "Environment"
4. أضف المتغيرات المطلوبة

## اختبار النظام

بعد إضافة المتغيرات، قم بإنشاء طلب تجريبي وتحقق من:
- وصول الإشعار عبر الواتساب
- ظهور رسائل التشخيص في logs
- وصول البريد الإلكتروني (إذا تم تفعيله)

## استكشاف الأخطاء

### لا تصل الإشعارات:
1. تحقق من صحة أرقام الواتساب (يجب أن تبدأ بـ 966)
2. تحقق من صحة API Key
3. راجع logs الخادم للتأكد من عدم وجود أخطاء

### رسائل الخطأ الشائعة:
- `لا توجد أرقام واتساب مُعرفة`: أضف ADMIN_WHATSAPP_1
- `API Key غير صحيح`: تحقق من CALLMEBOT_API_KEY
- `خطأ في الاتصال`: تحقق من الاتصال بالإنترنت

## ملاحظات مهمة

- يمكن إضافة أكثر من رقم واتساب باستخدام ADMIN_WHATSAPP_2, ADMIN_WHATSAPP_3, إلخ
- النظام يحاول جميع الطرق المتاحة تلقائياً
- في حالة فشل جميع الطرق، ستظهر تفاصيل الطلب في logs الخادم
